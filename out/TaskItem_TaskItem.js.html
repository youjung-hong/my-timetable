<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: TaskItem/TaskItem.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: TaskItem/TaskItem.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let nextId = 1

/**
 * @class
 * @constructor
 * @param {Date} startAt - datetime when user started a task
 * @param {Date} endAt - datetime when user ended a task
 * @example
 * // startAt: now, endAt: now
 * const task = new TaskItem();
 * @example
 * // startAt: new Date('2020-04-13T00:00:00'), endAt: new Date('2020-04-13T00:00:00')
 * const task = new TaskItem('2020-04-13T00:00:00');
 * @example
 * // startAt: new Date('2020-04-13T00:00:00'), endAt: new Date('2020-04-15T00:00:00')
 * const task = new TaskItem('2020-04-13T00:00:00', '2020-04-15T00:00:00');
 */
export class TaskItem {
  constructor(startAt, endAt) {
    this.id = nextId
    this._startAt = startAt ? new Date(startAt) : new Date()
    this._endAt = endAt ? new Date(endAt) : this.startAt

    if (this._startAt > this._endAt) {
      this._endAt = this._startAt
    }

    this.calculateDuration()

    nextId += 1
  }

  set startAt(_startAt) {
    this._startAt = _startAt instanceof Date ? _startAt : new Date(_startAt)

    if (this._startAt > this._endAt) {
      this._endAt = new Date(this._startAt.getTime() + this.duration)
      return
    }

    this.calculateDuration()
  }

  get startAt() {
    return this._startAt
  }

  set endAt(_endAt) {
    const endAt = _endAt instanceof Date ? _endAt : new Date(_endAt)

    if (endAt &lt; this._startAt) {
      return
    }

    this._endAt = endAt
    this.calculateDuration()
  }

  get endAt() {
    return this._endAt
  }

  /**
   * calculate milliseconds between startAt and endAt and set it to duration
   * @private
   */
  calculateDuration() {
    this.duration = this._endAt - this.startAt
  }
}

/**
 * clone a task item
 * @static
 * @param {TaskItem} item - an item to be cloned
 * @returns {TaskItem} a new item having the same data
 * @example
 * const task1 = new TaskItem();
 * const cloneOfTask1 = TaskItem.clone(task1);
 */
TaskItem.clone = (item) => {
  const taskItem = new TaskItem()
  taskItem.id = item.id
  taskItem.startAt = item.startAt
  taskItem.endAt = item.endAt

  return taskItem
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="TaskItem.html">TaskItem</a></li><li><a href="TaskItemList.html">TaskItemList</a></li><li><a href="Timetable.html">Timetable</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Sun May 24 2020 15:42:46 GMT+0900 (GMT+09:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
